@model CMS.Models.ViewModels.ProductViewModel

<!-- :::::: Breadcrumb ::::::  -->
<div class="page-breadcrumb">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <ul class="page-breadcrumb__menu text-right">
                    <li class="page-breadcrumb__nav"><a href="/" title="@Html.Raw("Trang chủ")">@Html.Raw("Trang chủ")</a></li>
                    <li class="page-breadcrumb__nav"><a href="/product-categories/@Model.Product.Slug-@Model.Product.CategoryId" title="@Html.Raw(Model.Product.ProductCategory.Name)">@Html.Raw(Model.Product.ProductCategory.Name)</a></li>
                    <li class="page-breadcrumb__nav active">@Html.Raw(Model.Product.Name)</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- :::::: Main ::::::  -->
<main id="main-container" class="main-container">
    <div class="container">
        <div class="row">
            <!-- Product Details Gallery -->
            <div class="col-12">
                <div class="product-details">
                    <div class="row">
                        <!-- IMAGES -->
                        <div class="col-md-6">
                            <div class="product-gallery-box m-b-60">
                                <!-- Image -->
                                <div class="product-image--large overflow-hidden">
                                    <img class="img-fluid" id="img-zoom" src="@Model.Product.Image" title="@Html.Raw(Model.Product.Name)" alt="@Html.Raw(Model.Product.Name)" loading="lazy">
                                </div>
                                <!-- Images -->
                                @if (Model.Product.ProductImages.Count > 0)
                                {
                                    <div class="pos-relative m-t-30">
                                        <div id="gallery-zoom" class="product-image--thumb product-image--thumb-horizontal overflow-hidden swiper-outside-arrow-hover m-lr-30">
                                            <div class="swiper-wrapper">
                                                @foreach (var image in Model.Product.ProductImages)
                                                {
                                                    <div class="swiper-slide">
                                                        <a data-image="@image.Link" data-zoom-image="@image.Link" title="@Html.Raw(Model.Product.Name)">
                                                            <img class="img-fluid" src="@image.Link" title="@Html.Raw(Model.Product.Name)" alt="@Html.Raw(Model.Product.Name)" loading="lazy">
                                                        </a>
                                                    </div>
                                                }
                                            </div>
                                        </div>
                                        <div class="swiper-buttons">
                                            <!-- Arrows -->
                                            <div class="swiper-button-next gallery__nav gallery__nav--next"><i class="fal fa-chevron-right"></i></div>
                                            <div class="swiper-button-prev gallery__nav gallery__nav--prev"><i class="fal fa-chevron-left"></i></div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                        <!-- BASIC INFO -->
                        <div class="col-md-6">
                            <div class="product-details-box">
                                <!-- Product Name -->
                                <h1 class="section-content__title">@Html.Raw(Model.Product.Name)</h1>
                                <!-- Category -->
                                <div class="text-reference m-b-10">
                                    Danh mục:
                                    <a href="/product-categories/@Model.Product.ProductCategory.Slug-@Model.Product.CategoryId" title="@Html.Raw(Model.Product.ProductCategory.Name)">
                                        @Html.Raw(Model.Product.ProductCategory.Name)
                                    </a>
                                </div>
                                <!-- Product Price -->
                                <div class="product__price">
                                    <!-- Prices -->
                                    @if (Model.Prices.Count > 0)
                                    {
                                        <!-- Desktop -->
                                        <div class="row d-sm-none d-none d-sm-none d-sm-block" style="margin-bottom: 20px">
                                            <div class="col-12">
                                                <div class="swiper-outside-arrow-fix pos-relative">
                                                    <div class="product-counter-slider-4grid overflow-hidden margin-reset swiper-container-initialized swiper-container-horizontal">
                                                        <div class="swiper-wrapper">
                                                            @foreach (var price in Model.Prices.OrderBy(p => p.Price))
                                                            {

                                                                string checkedPrice = price.Id == Model.Product.Id ? "checked" : "";
                                                                string backgroundColor = price.Id == Model.Product.Id ? "#fff1f1" : "#fff";

                                                                <div class="product__box product__box--counter product__box--border-hover swiper-slide text-center"
                                                                     style="cursor:pointer; background-color: @backgroundColor">
                                                                    <a href="/products/@price.Slug-@price.Id" style="cursor: pointer;" title="@Html.Raw(price.Name)">
                                                                        <div class="product__price m-t-10" style="cursor: pointer;">
                                                                            <label for="ship-standard" style="cursor: pointer;">
                                                                                <input type="radio" onclick="window.location='/products/@price.Slug-@price.Id@price.Slug-@price.Id';" class="shipping-select" style="cursor: pointer;" @checkedPrice><span>@Html.Raw(price.Code)</span>
                                                                            </label>
                                                                        </div>
                                                                        <div title="@Html.Raw(price.Name)" class="product__link product__link--underline product__link--weight-light m-t-15" style="cursor: pointer;">
                                                                            <b>@price.Price.ToString("n0")</b> <sup>₫</sup>
                                                                        </div>
                                                                    </a>
                                                                </div>
                                                            }
                                                        </div>
                                                        <div class="swiper-buttons">
                                                            <!-- Add Arrows -->
                                                            <div class="swiper-button-next default__nav default__nav--next"><i class="fal fa-chevron-right"></i></div>
                                                            <div class="swiper-button-prev default__nav default__nav--prev"><i class="fal fa-chevron-left"></i></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Mobile -->
                                        <div class="row d-block d-sm-block d-md-none" style="margin-bottom: 20px">
                                            <div class="col-12">
                                                <div class="swiper-outside-arrow-fix pos-relative">
                                                    <div class="product-counter-slider-4grid overflow-hidden margin-reset swiper-container-initialized swiper-container-horizontal">
                                                        <div class="swiper-wrapper">
                                                            @foreach (var price in Model.Prices.OrderByDescending(p => p.IsCurrent).ThenBy(p => p.Price))
                                                            {

                                                                string checkedPrice = price.Id == Model.Product.Id ? "checked" : "";
                                                                string backgroundColor = price.Id == Model.Product.Id ? "#fff1f1" : "#fff";

                                                                <div class="product__box product__box--counter product__box--border-hover swiper-slide text-center"
                                                                     style="cursor:pointer; background-color: @backgroundColor">
                                                                    <a href="/products/@price.Slug-@price.Id" style="cursor: pointer;" title="@Html.Raw(price.Name)">
                                                                        <div class="product__price m-t-10" style="cursor: pointer;">
                                                                            <label for="ship-standard" style="cursor: pointer;">
                                                                                <input type="radio" onclick="window.location='/products/@price.Slug-@price.Id@price.Slug-@price.Id';" class="shipping-select" style="cursor: pointer;" @checkedPrice><span>@Html.Raw(price.Code)</span>
                                                                            </label>
                                                                        </div>
                                                                        <div title="@Html.Raw(price.Name)" class="product__link product__link--underline product__link--weight-light m-t-15" style="cursor: pointer;">
                                                                            <b>@price.Price.ToString("n0")</b> <sup>₫</sup>
                                                                        </div>
                                                                    </a>
                                                                </div>
                                                            }
                                                        </div>
                                                        <div class="swiper-buttons">
                                                            <!-- Add Arrows -->
                                                            <div class="swiper-button-next default__nav default__nav--next"><i class="fal fa-chevron-right"></i></div>
                                                            <div class="swiper-button-prev default__nav default__nav--prev"><i class="fal fa-chevron-left"></i></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    <span><b>@Html.Raw("Giá"): </b></span>

                                    <div class="row">
                                        <div class="col-md-5 m-b-20">
                                            @if (Model.Product.Type == 3)
                                            {
                                                <span class="product__price-del">@Model.Product.OldPrice.ToString("n0") <sup>₫</sup></span>
                                            }
                                            <span class="product__price-reg" style="font-size: 25px">@Model.Product.Price.ToString("n0") <sup>₫</sup></span>
                                        </div>
                                        <div class="col-md-7 m-b-20">
                                            <a ng-click="main.onOpenOrder('@Model.Product.Id', '@Model.Product.Name', '@Model.Product.Image', '@Model.Product.Price')"
                                               class="btn btn--box btn--small btn--blue btn--uppercase btn--weight"
                                               href="#modalAddCart"
                                               data-toggle="modal"
                                               data-dismiss="modal">
                                                @Html.Raw("Mua ngay")
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <!-- Competitor Prices -->
                                @if (Model.CompetitorPrices.Count > 0)
                                {
                                    <div class="product__desc m-t-25 m-b-30">
                                        <div class="key-selling">
                                            <div class="title_text text-uppercase m-b-10">
                                                <b><u>@Html.Raw("So sánh giá")</u></b>
                                            </div>
                                            <div class="container">
                                                <div id="tech-info-body">
                                                    <div class="table-responsive-md">
                                                        <table class="product-dis__list" style="border: none">
                                                            <tbody>
                                                                @foreach (var price in Model.CompetitorPrices)
                                                                {
                                                                    <tr>
                                                                        <td class="product-dis__title text-left" style="padding: 10px">
                                                                            <img src="@price.Logo" title="@price.Name" alt="@price.Name" style="width: 100px" />
                                                                        </td>
                                                                        <td class="product-dis__text text-left" style="padding: 10px;font-weight: 500;color: red;">
                                                                            @price.Price.ToString("n0") <sup>₫</sup>
                                                                        </td>
                                                                        <td class="product-dis__text text-left" style="padding: 10px">
                                                                            <a href="@price.Link" rel="nofollow" title="@price.Name" target="_blank" style="color: #007bff; text-decoration: none; background-color: transparent;">
                                                                                <i class="far fa-search"></i> Xem
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="ovlarticle" style="display: none;"></div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Relate Products -->
            <div class="col-12 m-b-20">
                @Html.Action("RelateProducts", "Products", new { productId = Model.Product.Id, categoryId = Model.Product.CategoryId, brandId = Model.Product.BrandId })
            </div>

            <!-- Tech Info -->
            <div class="col-md-4 d-block d-sm-none">
                @if (Model.TechInfos.Count > 0)
                {
                    <div class="product__desc m-t-25 m-b-30">
                        <div class="key-selling">
                            <div class="title_text text-uppercase m-b-10" style="font-size: 1.2em;color: #e94c62">
                                <b><u>@Html.Raw("Thông số kỹ thuật")</u></b>
                            </div>
                            <div id="tech-info-body-1" style="overflow:hidden">
                                <div class="table-responsive-md">
                                    <table class="product-dis__list table table-striped" style="border: none">
                                        <tbody>
                                            @foreach (var techInfo in Model.TechInfos)
                                            {
                                                <tr>
                                                    <td class="text-left">
                                                        <span class="product-dis__title">@Html.Raw(techInfo.Field)</span>
                                                        :
                                                        <span class="product-dis__text">@Html.Raw(techInfo.Value)</span>
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="ovlarticle" style="display: none;"></div>
                        </div>
                    </div>
                }
            </div>

            <!-- Content -->
            <div class="col-md-8 html-content">
                <div class="container">
                    <div id="content-body">
                        @if (!string.IsNullOrEmpty(Model.Product.Content))
                        {
                            @Html.Raw(Model.Product.Content)
                        }
                    </div>
                </div>
            </div>

            <!-- Tech Info -->
            <div class="col-md-4 d-none d-sm-block">
                @if (Model.TechInfos.Count > 0)
                {
                    <div class="product__desc m-t-25 m-b-30">
                        <div class="key-selling">
                            <div class="title_text text-uppercase m-b-10" style="font-size: 1.2em;color: #e94c62">
                                <b><u>@Html.Raw("Thông số kỹ thuật")</u></b>
                            </div>
                            <div id="tech-info-body-2" style="overflow:hidden">
                                <div class="table-responsive-md">
                                    <table class="product-dis__list table table-striped" style="border: none">
                                        <tbody>
                                            @foreach (var techInfo in Model.TechInfos)
                                            {
                                                <tr>
                                                    <td class="text-left">
                                                        <span class="product-dis__title">@Html.Raw(techInfo.Field)</span>
                                                        :
                                                        <span class="product-dis__text">@Html.Raw(techInfo.Value)</span>
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="ovlarticle" style="display: none;"></div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</main>
