!function (t) { "function" == typeof define && define.amd ? define(["jquery"], t) : "object" == typeof exports ? module.exports = t(require("jquery")) : t(jQuery) }(function (t) { "use strict"; var e = "readmore", o = { speed: 100, collapsedHeight: 200, heightMargin: 16, moreLink: '<a href="#">Read More</a>', lessLink: '<a href="#">Close</a>', embedCSS: !0, blockCSS: "display: block; width: 100%;", startOpen: !1, blockProcessed: function () { }, beforeToggle: function () { }, afterToggle: function () { } }, i = {}, a = 0; function n(t) { var e = t.clone().css({ height: "auto", width: t.width(), maxHeight: "none", overflow: "hidden" }).insertAfter(t), o = e.outerHeight(), i = parseInt(e.css({ maxHeight: "" }).css("max-height").replace(/[^-\d\.]/g, ""), 10), a = t.data("defaultHeight"); e.remove(); var n = i || t.data("collapsedHeight") || a; t.data({ expandedHeight: o, maxHeight: i, collapsedHeight: n }).css({ maxHeight: "none" }) } var s, r, d, h, l = (s = function () { t("[data-readmore]").each(function () { var e = t(this), o = "true" === e.attr("aria-expanded"); n(e), e.css({ height: e.data(o ? "expandedHeight" : "collapsedHeight") }) }) }, r = 100, function () { var t = this, e = arguments, o = d && !h; clearTimeout(h), h = setTimeout(function () { h = null, d || s.apply(t, e) }, r), o && s.apply(t, e) }); function c(a, n) { this.element = a, this.options = t.extend({}, o, n), function (t) { if (!i[t.selector]) { var e = " "; t.embedCSS && "" !== t.blockCSS && (e += t.selector + " + [data-readmore-toggle], " + t.selector + "[data-readmore]{" + t.blockCSS + "}"), e += t.selector + "[data-readmore]{transition: height " + t.speed + "ms;overflow: hidden;}", o = document, a = e, (n = o.createElement("style")).type = "text/css", n.styleSheet ? n.styleSheet.cssText = a : n.appendChild(o.createTextNode(a)), o.getElementsByTagName("head")[0].appendChild(n), i[t.selector] = !0 } var o, a, n }(this.options), this._defaults = o, this._name = e, this.init(), window.addEventListener ? window.addEventListener("load", l) : window.attachEvent("load", l) } c.prototype = { init: function () { var e = t(this.element); e.data({ defaultHeight: this.options.collapsedHeight, heightMargin: this.options.heightMargin }), n(e); var o = e.data("collapsedHeight"), i = e.data("heightMargin"); if (e.outerHeight(!0) <= o + i) return this.options.blockProcessed && "function" == typeof this.options.blockProcessed && this.options.blockProcessed(e, !1), !0; var s, r = e.attr("id") || function (t) { var e = ++a; return String(null === t ? "rmjs-" : t) + e }(), d = this.options.startOpen ? this.options.lessLink : this.options.moreLink; e.attr({ "data-readmore": "", "aria-expanded": this.options.startOpen, id: r }), e.after(t(d).on("click", (s = this, function (t) { s.toggle(this, e[0], t) })).attr({ "data-readmore-toggle": r, "aria-controls": r })), this.options.startOpen || e.css({ height: o }), this.options.blockProcessed && "function" == typeof this.options.blockProcessed && this.options.blockProcessed(e, !0) }, toggle: function (e, o, i) { i && i.preventDefault(), e || (e = t('[aria-controls="' + this.element.id + '"]')[0]), o || (o = this.element); var a, n = t(o), s = "", r = "", d = !1, h = n.data("collapsedHeight"); n.height() <= h ? (s = n.data("expandedHeight") + "px", r = "lessLink", d = !0) : (s = h, r = "moreLink"), this.options.beforeToggle && "function" == typeof this.options.beforeToggle && this.options.beforeToggle(e, n, !d), n.css({ height: s }), n.on("transitionend", (a = this, function () { a.options.afterToggle && "function" == typeof a.options.afterToggle && a.options.afterToggle(e, n, d), t(this).attr({ "aria-expanded": d }).off("transitionend") })), t(e).replaceWith(t(this.options[r]).on("click", function (t) { return function (e) { t.toggle(this, o, e) } }(this)).attr({ "data-readmore-toggle": n.attr("id"), "aria-controls": n.attr("id") })) }, destroy: function () { t(this.element).each(function () { var e = t(this); e.attr({ "data-readmore": null, "aria-expanded": null }).css({ maxHeight: "", height: "" }).next("[data-readmore-toggle]").remove(), e.removeData() }) } }, t.fn.readmore = function (o) { var i = arguments, a = this.selector; return "object" == typeof (o = o || {}) ? this.each(function () { if (t.data(this, "plugin_" + e)) { var i = t.data(this, "plugin_" + e); i.destroy.apply(i) } o.selector = a, t.data(this, "plugin_" + e, new c(this, o)) }) : "string" == typeof o && "_" !== o[0] && "init" !== o ? this.each(function () { var a = t.data(this, "plugin_" + e); a instanceof c && "function" == typeof a[o] && a[o].apply(a, Array.prototype.slice.call(i, 1)) }) : void 0 } });